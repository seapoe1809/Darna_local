<!DOCTYPE html>
<html>

<head>
  <title>Connect NC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.png') }}">
 
 <style>
 body{
 background-image: {{ url_for('static', filename='bkg0.png')}};
 }
 </style>
   
</head>

<body>


	
<h1 style="font-family: Calibri, sans-serif; font-size: 30px; font-weight: bold; color: black; font-style: bold;text-align: center;">QR CONNECT & TIPS</h1>
    <h2 style="font-family: Calibri, sans-serif; font-size: 20px; font-weight: bold; color: black; font-style: bold;text-align: center;">DARNA.HI</h2>
 
 <div style="display: flex; justify-content: center; align-items: center; height: 50vh;">
  <img src="{{ url_for('static', filename='qrcode.png') }}" width="100" height="100" alt="QR Code">
</div>
 <p>
 1. <a href="nextcloud://">Goto Nextcloud app if installed.</a>
 
 </p>
 <p>
 2. <a href="#qrcode">Connect other devices using QR Code.</a> </p>
 <p> 
 3. <a href="#using_grafana"> How to view your dashboards on 'View my Device Data' via Grafana.</a> </p>
 <p>
 4. <a href="#nextcloud_macos"> Connect Nextcloud to MacOS.</a></p>
 <p>
 5. <a href="mailto:pmqa198@gmail.com"> Email feedback to Darna creator </a></p>
 <p>
 6.  <a href="#rsync"> What does 'RUN SYNC' do?.</a> </p>




<h3 style="font-family: Calibri, sans-serif; font-size: 20px; font-weight: bold; color: darkblue; font-style: bold;text-align: center;">Connect other devices using QR Code on iOS.</h3>
<p id="qrcode">
 </p> <p>
This guide allows you to connect other devices to your Darna Server. It does require you to have camera enabled to scan QR codes:
 </p> <p>
 1.  Open "camera app" on your iOS. When pointed to QR code at top of screen it should give you a link to click on. Click on link.
 </p> <p>
 2.  On the bottom ribbon of browser window on your iOS device, click on '⮹'. Then choose 'Add to home screen'. 
  </p> <p>
 3.  This link will now allow you to launch the server directly from your home screen when connected to local WIFI where the server is enabled.
  </p> <p>
  

<h3 style="font-family: Calibri, sans-serif; font-size: 20px; font-weight: bold; color: darkblue; font-style: bold;text-align: center;">How to view your dashboards on 'View my Device Data' via Grafana.</h3>
<p id="using_grafana">
 </p> <p>
This guide allows you to connect other devices to the Grafana Viewer via Darna Server. It does require you to upload your device data:
 </p> <p>
 1.  Open "Health app" on your iOS. Then download iOS health files: On Apple "Health app", click the profile icon to the top right, scroll all the way down, then choose "Export All Health Data", click "Export" and save the zip file to iOS Files folder.
 </p> <p>
 2.  On the Darna Server, choose 'Uploads' card, click 'choose file' on next page, navigate to iOS files folder and choose 'export.zip' and finally choose 'upload'. 
  </p> <p>
 3.  Once the 'export.zip' is in the 'uploads' folder, click 'Sync' card on the Darna Server. In the background, the Grafana and ingester will start. This could take time (around 5-10 min) as they could be upto 100,000 records to transfer.
  </p> <p>
 4.  Once the records are transferred, click on the 'View my Device Data'. This should open a new webbrowser.
  </p> <p>
 5.  Login using user: admin, password: health which are the default username and password
  </p> <p>
 6.  Once logged in click on '≡' located at top left. That is the 'Toggle Menu'.
  </p> <p>
 7.  Once on 'Toggle Menu', click 'Dashboards'. That will open all the active dashboards to choose from.
  </p> <p>
 8.  Click on any of them to view your data. If you dont see any data, you might have to start steps all over again.
  </p> <p>
 
 </p>
 
 </p>
 
<h3 style="font-family: Calibri, sans-serif; font-size: 20px; font-weight: bold; color: darkblue; font-style: bold;text-align: center;">Connect Nextcloud to MacOS</h3>
<p id="nextcloud_macos">
This guide allows you to connect your Nextcloud account to MacOS.   The steps are as follows: 
 </p> <p>
1.  To connect your health server on MacOS, press the following keys together : ⌘ + K OR Command + K
 </p> <p>
2.  This will take you to a input bar that says enter you "Server" information.
 </p> <p>
3.  Enter your information that would look something like this: "<nextcloud.user.com>/remote.php/dav/files/admin". In this please replace <nextcloud.user.com> with your domain address. Then press connect.
 </p> <p>
4.  Your mac will now try to connect.
 </p> <p>
5.  To go to your server, click on 'Finder', which is usually the first icon in bottom left of screen.
 </p> <p>
6.  Goto "Locations" and then "Network". Nextcloud should now show up there. On clicking it might prompt you for <username> and <password>.

</p>


<h3 style="font-family: Calibri, sans-serif; font-size: 20px; font-weight: bold; color: darkblue; font-style: bold;text-align: center;">What does 'RUN SYNC' do?.</h3>
<p id="rsync">
 </p> <p>
Im glad you asked. 'RUN SYNC' is many functions mashed into one. It started as just 'rsync' function that would move files from 'Upload' folder to the main folder 'Health_files'. However it has morphed as the Darna project has evolved. It does the following:
 </p> <p>
 1.  Runs 'rsync' to move files from 'Upload' folder to 'Health_files' folder. It additionally screens for .PDF, .JPG, .PNG, .TXT files and also makes a copy in 'OCR_files'. This allows Tesseract in 'Analyze' card to read those documents.
 </p> <p>
 2.  Initiates 'Caffeine' to keep you computer awake so that your server doesnt sleep when you are away. 
  </p> <p>
 3.  If 'Export.zip' file containing your iOS health kit is available in 'Upload' directory, it unzips that file, initates Grafana and Influxdb, populates influxdb with your records.
  </p>
 
